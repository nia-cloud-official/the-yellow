import{e as ge,b as pe,h as E,a as se,E as me,H as Se,c as Te,r as we,s as Ie,d as z,f as K,g as Q,p as Z,U as Ee,i as ke,j,u as ye,k as G,l as W,m as ne,n as v,o as Ne,q as Oe,t as Pe,v as re,w as Ae,L as Ce,x as fe,S as Fe,y as Re,P as xe,z as He,A as ie,B as Le,C as X,D as $,F as P,G as je,I as g,J as R,K as p,M as m,N as A,O as x,Q as J}from"./render.7Z7HXQze.js";const De="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(De);ge();function Je(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Y(t,a,[n,e]=[0,0]){E&&n===0&&se();var r=t,l=null,s=null,f=Ee,c=n>0?me:0,i=!1;const _=(b,o=!0)=>{i=!0,h(o,b)},h=(b,o)=>{if(f===(f=b))return;let S=!1;if(E&&e!==-1){if(n===0){const y=r.data;y===Se?e=0:y===Te?e=1/0:(e=parseInt(y.substring(1)),e!==e&&(e=f?1/0:-1))}const k=e>n;!!f===k&&(r=we(),Ie(r),z(!1),S=!0,e=-1)}f?(l?K(l):o&&(l=Q(()=>o(r))),s&&Z(s,()=>{s=null})):(s?K(s):o&&(s=Q(()=>o(r,[n+1,e]))),l&&Z(l,()=>{l=null})),S&&z(!0)};pe(()=>{i=!1,a(_),i||h(null,null)},c),E&&(r=ke)}function ee(t,a,n,e,r){E&&se();var l=a.$$slots?.[n],s=!1;l===!0&&(l=a[n==="default"?"children":n],s=!0),l===void 0||l(t,s?()=>e:e)}const te=[...` 	
\r\fÂ \v\uFEFF`];function Ye(t,a,n){var e=t==null?"":""+t;if(n){for(var r in n)if(n[r])e=e?e+" "+r:r;else if(e.length)for(var l=r.length,s=0;(s=e.indexOf(r,s))>=0;){var f=s+l;(s===0||te.includes(e[s-1]))&&(f===e.length||te.includes(e[f]))?e=(s===0?"":e.substring(0,s))+e.substring(f+1):s=f}}return e===""?null:e}function ae(t,a,n,e,r,l){var s=t.__className;if(E||s!==n||s===void 0){var f=Ye(n,e,l);(!E||f!==t.getAttribute("class"))&&(f==null?t.removeAttribute("class"):t.className=f),t.__className=n}else if(l&&r!==l)for(var c in l){var i=!!l[c];(r==null||i!==!!r[c])&&t.classList.toggle(c,i)}return l}function Ge(t=!1){const a=j,n=a.l.u;if(!n)return;let e=()=>Oe(a.s);if(t){let r=0,l={};const s=Pe(()=>{let f=!1;const c=a.s;for(const i in c)c[i]!==l[i]&&(l[i]=c[i],f=!0);return f&&r++,r});e=()=>v(s)}n.b.length&&ye(()=>{le(a,e),W(n.b)}),G(()=>{const r=ne(()=>n.m.map(Ne));return()=>{for(const l of r)typeof l=="function"&&l()}}),n.a.length&&G(()=>{le(a,e),W(n.a)})}function le(t,a){if(t.l.s)for(const n of t.l.s)v(n);a()}function Ue(t){j===null&&Je(),re&&j.l!==null?qe(j).m.push(t):G(()=>{const a=ne(t);if(typeof a=="function")return a})}function qe(t){var a=t.l;return a.u??={a:[],b:[],m:[]}}let H=!1;function Be(t){var a=H;try{return H=!1,[t(),H]}finally{H=a}}function L(t,a,n,e){var r=!re||(n&xe)!==0,l=!1,s;[s,l]=Be(()=>t[a]);var f=Fe in t||Re in t;Ae(t,a)?.set??(f&&a in t);var c=e,i=!0,_=()=>(i&&(i=!1,c=e),c),h;if(r)h=()=>{var o=t[a];return o===void 0?_():(i=!0,o)};else{var b=fe(()=>t[a]);b.f|=Ce,h=()=>{var o=v(b);return o!==void 0&&(c=void 0),o===void 0?c:o}}return h}var Me=ie('<div class="mt-5 flex items-center justify-center"><p class="text-slate-500 text-sm"><!></p></div>'),Ve=ie('<div class="mt-12 flex flex-col sm:flex-row gap-y-2 items-center justify-center gap-x-2 sm:gap-y-0"><h3 class="text-slate-700"> </h3> <div><button type="button"><!> </button> <button type="button"><!> </button></div></div> <!>',1);function Ke(t,a){He(a,!1);let n=L(a,"title",8),e=L(a,"firstChoice",8),r=L(a,"secondChoice",8),l=L(a,"slug",8),s=R(0),f=0,c=R(!1),i=R(!1),_=R(null);Ue(()=>{const u=JSON.parse(localStorage.getItem("feedback")||"{}");g(i,!!u[l()]),g(_,u[l()]||null),h()});async function h(){try{const u=await fetch("/api/feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({slug:l()})});if(!u.ok)throw new Error(`HTTP error! status: ${u.status}`);const d=await u.json();g(s,d.helpful||0),f=d.notHelpful||0,g(c,!0)}catch(u){console.error("Failed to fetch feedback count:",u)}}async function b(u){if(!v(i))try{const d=await fetch("/api/feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({slug:l(),type:u})});if(!d.ok)throw new Error(`HTTP error! status: ${d.status}`);const O=await d.json();g(s,O.helpful||0),f=O.notHelpful||0;const C=JSON.parse(localStorage.getItem("feedback")||"{}");C[l()]=u,localStorage.setItem("feedback",JSON.stringify(C)),g(i,!0),g(_,u)}catch(d){console.error("Error submitting feedback:",d)}}Ge();var o=Ve(),S=Le(o),k=p(S),y=p(k,!0);m(k);var U=A(k,2),T=p(U);let q;var B=p(T);ee(B,a,"helpfulIcon",{});var oe=A(B);m(T);var N=A(T,2);let M;var V=p(N);ee(V,a,"notHelpfulIcon",{});var ue=A(V);m(N),m(U),m(S);var ce=A(S,2);{var de=u=>{var d=Me(),O=p(d),C=p(O);{var ve=w=>{var D=J("Fetching...");P(w,D)},_e=(w,D)=>{{var be=I=>{var F=J("1 person found this helpful");P(I,F)},he=I=>{var F=J();X(()=>x(F,`${v(s)??""} people found this helpful`)),P(I,F)};Y(w,I=>{v(s)===1?I(be):I(he,!1)},D)}};Y(C,w=>{v(c)?w(_e,!1):w(ve)})}m(O),m(d),P(u,d)};Y(ce,u=>{v(s)>0&&u(de)})}X((u,d)=>{x(y,n()),T.disabled=v(i),q=ae(T,1,"group inline-flex items-center gap-x-2 rounded-lg border border-slate-400 px-3 py-2 text-sm font-medium text-slate-700 hover:border-teal-500 hover:bg-teal-500",null,q,u),x(oe,` ${e()??""}`),N.disabled=v(i),M=ae(N,1,"group inline-flex items-center gap-x-2 rounded-lg border border-slate-400 px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-300",null,M,d),x(ue,` ${r()??""}`)},[()=>({"bg-teal-500":v(_)==="helpful","border-teal-500":v(_)==="helpful"}),()=>({"bg-slate-300":v(_)==="notHelpful"})],fe),$("click",T,()=>b("helpful")),$("click",N,()=>b("notHelpful")),P(t,o),je()}export{Ke as default};
